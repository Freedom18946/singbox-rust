# Singbox-Rust ä»£ç æ·±åº¦åˆ†ææŠ¥å‘Š

> **ç”Ÿæˆæ—¶é—´**: 2025-10-01
> **åˆ†æèŒƒå›´**: å…¨éƒ¨ crates (14ä¸ª)
> **ä»£ç æ€»é‡**: ~30,000+ è¡Œ
> **åˆ†ææ·±åº¦**: æ¶æ„ã€ä¾èµ–ã€ä»£ç è´¨é‡ã€å®‰å…¨æ€§ã€æ€§èƒ½

## æ‰§è¡Œæ‘˜è¦

æœ¬æŠ¥å‘Šå¯¹ singbox-rust é¡¹ç›®çš„æ‰€æœ‰ crate è¿›è¡Œäº†å…¨é¢æ·±å…¥çš„åˆ†æ,åŒ…æ‹¬æ¶æ„è®¾è®¡ã€ä¾èµ–å…³ç³»ã€ä»£ç è´¨é‡ã€å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚ä¸»è¦å‘ç°:

### ğŸ¯ é¡¹ç›®æ•´ä½“è¯„ä¼°
- **æ¶æ„è´¨é‡**: â­â­â­â­â­ (9/10) - æ¸…æ™°åˆ†å±‚,ä¾èµ–æ–¹å‘æ­£ç¡®
- **ä»£ç è´¨é‡**: â­â­â­â­ (8/10) - ä¸¥æ ¼ clippy,è‰¯å¥½æµ‹è¯•è¦†ç›–
- **å®‰å…¨æ€åŠ¿**: â­â­â­â­â­ (9.5/10) - ä¸“ä¸šçº§å®‰å…¨å·¥ç¨‹å®è·µ
- **ç”Ÿäº§å°±ç»ª**: â­â­â­â­ (7.5/10) - Linux/macOS å°±ç»ª,Windows éœ€å®Œå–„

### âš ï¸ å…³é”®å‘ç°

**å…³é”®é—®é¢˜ (P0 - éœ€ç«‹å³ä¿®å¤)** - âœ… **å·²å…¨éƒ¨ä¿®å¤ (2025-10-01)**:
1. âœ… **sb-config**: 2ä¸ªé›†æˆæµ‹è¯•å¤±è´¥ â†’ **å·²ä¿®å¤**
   - schema_version è¿ç§»bug: ä¿®æ”¹ compat.rs:21 ä» `or_insert` åˆ° `insert` å¼ºåˆ¶è¦†ç›–
   - è­¦å‘Šæœªç”Ÿæˆ: æ›´æ–° validator/v2.rs + v2_schema.json + compat.rs å®Œæ•´å®ç° V1â†’V2 è¿ç§»
2. âœ… **sb-config**: ç”Ÿäº§ç¯å¢ƒ panic é£é™© â†’ **å·²ä¿®å¤**
   - schema_v2.rs:6 æ”¹ä¸ºè¿”å› `Result<Value>` è€Œé `expect()`
3. âœ… **sb-metrics**: æµ‹è¯•æŸå â†’ **å·²ä¿®å¤**
   - æ·»åŠ  `export_prometheus()` å…¬å…±å‡½æ•°åˆ° lib.rs æ›¿ä»£å·²åˆ é™¤çš„ registry æ¨¡å—
4. âœ… **sb-platform**: Windows WinTun å®ç° â†’ **å·²è¯„ä¼°**
   - å½“å‰ä¸ºå ä½ç¬¦å®ç°,æ ¸å¿ƒ WinTun API é›†æˆã€æ•°æ®åŒ… I/O æœªå®ç°
   - ä¼°ç®—å·¥ä½œé‡: 6-9å¤© (å»ºè®®ä½¿ç”¨ `wintun` crate è€Œéæ‰‹åŠ¨ FFI)
   - æ¶æ„è‰¯å¥½,é…ç½®ç®¡ç†å·²é€šè¿‡ netsh å®ç°,trait æ¡†æ¶å®Œæ•´

**ä¿®å¤åæµ‹è¯•çŠ¶æ€**:
- âœ… sb-config: 29/29 æµ‹è¯•é€šè¿‡ (100%)
- âœ… sb-metrics: æ‰€æœ‰æµ‹è¯•é€šè¿‡
- âœ… ç¼–è¯‘é›¶è­¦å‘Š,é›¶é”™è¯¯

**æ¶æ„å…³æ³¨ç‚¹ (P1)**:
1. **å¾ªç¯ä¾èµ–å·²æ‰“ç ´** (sb-core â† sb-config),ä½†é—ç•™ 180+ è¡Œæ³¨é‡Šä»£ç 
2. **sb-config**: ä¸‰ä¸ªé‡å çš„é…ç½®ç³»ç»Ÿ (Config vs model::Config vs ir::ConfigIR)
3. **sb-metrics**: ä¸¤ä¸ªé‡å¤çš„ HTTP exporter å®ç°
4. **sb-platform**: macOS/Windows è¿›ç¨‹åŒ¹é…ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…· (æ€§èƒ½å¼€é”€)

**ä»£ç è´¨é‡äº®ç‚¹**:
- âœ… æ‰€æœ‰ crate é›¶ clippy è­¦å‘Š (ä¸¥æ ¼ lint è®¾ç½®)
- âœ… å…¨é¢çš„ä¸å®‰å…¨ä»£ç æ–‡æ¡£ (ä¸­è‹±åŒè¯­å®‰å…¨æ³¨é‡Š)
- âœ… ä¸“ä¸šçº§å®‰å…¨å®è·µ (zeroize, å‡­æ®å±è”½, å†…å­˜å®‰å…¨)
- âœ… è‰¯å¥½çš„æµ‹è¯•è¦†ç›–ç‡ (å¤§å¤šæ•° crate >70%)

---

## æ¨¡å—åˆ†æé¡ºåºä¸ä¾èµ–å±‚æ¬¡

### ä¾èµ–å±‚æ¬¡å›¾
```
Layer 0 (åŸºç¡€å±‚ - æ— å·¥ä½œåŒºä¾èµ–):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sb-types   â”‚  â”‚ sb-admin-contractâ”‚  â”‚ sb-platform â”‚  â”‚ sb-runtime  â”‚  â”‚ sb-security â”‚
â”‚  (107è¡Œ)    â”‚  â”‚   (89è¡Œ)         â”‚  â”‚  (2755è¡Œ)   â”‚  â”‚  (1392è¡Œ)   â”‚  â”‚  (1300è¡Œ)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                        â”‚                                  â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                  â”‚
      â–¼                                        â–¼                                  â”‚
Layer 1 (ä½çº§æœåŠ¡):                                                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  sb-config  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ sb-metrics  â”‚                         â”‚
â”‚  (2980è¡Œ)   â”‚                          â”‚  (1085è¡Œ)   â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
      â”‚                                        â”‚                                  â”‚
      â”‚                                        â”‚                                  â”‚
      â–¼                                        â–¼                                  â–¼
Layer 2 (æ ¸å¿ƒåŸºç¡€è®¾æ–½):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               sb-core (æœ€å¤§ crate)                                â”‚
â”‚  ä¾èµ–: sb-config, sb-metrics, sb-platform, sb-types                              â”‚
â”‚  ç‰¹æ€§: 60+ features (è·¯ç”±ã€DNSã€åè®®ã€TLSã€GeoIP)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                    â”‚
      â”‚                    â”‚
      â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚sb-transport â”‚      â”‚  sb-proto   â”‚
â”‚ â†’ sb-core,  â”‚      â”‚â†’ sb-trans-  â”‚
â”‚  sb-metrics â”‚      â”‚   port      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 3 (é«˜çº§æœåŠ¡):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sb-subscribe â”‚     â”‚   sb-api     â”‚     â”‚  sb-adapters â”‚
â”‚ â†’ sb-core    â”‚     â”‚â†’ sb-core,    â”‚     â”‚â†’ sb-core,    â”‚
â”‚              â”‚     â”‚  sb-config   â”‚     â”‚  sb-config   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                    â”‚                     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
Layer 4 (åº”ç”¨å±‚):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        app                            â”‚
â”‚  20+ å¯æ‰§è¡Œæ–‡ä»¶, 40+ features                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Layer 0: åŸºç¡€ Crates è¯¦ç»†åˆ†æ

### crates/sb-types

**æ–‡ä»¶è·¯å¾„**: `crates/sb-types/src/lib.rs` (107è¡Œ)
**æ¨¡å—ç›®æ ‡**: å®šä¹‰è·¨ crate å…±äº«çš„ç¨³å®šç±»å‹å¥‘çº¦

**æ ¸å¿ƒç»„ä»¶**:
- `IssueCode`: æšä¸¾,åŒ…å«27ä¸ªç¨³å®šé”™è¯¯ç  (CLIã€éªŒè¯ã€TLSã€ç½‘ç»œã€ä¸Šæ¸¸)
- `IssuePayload`: ç»“æ„åŒ–é”™è¯¯è½½è· (kind, code, ptr, msg, hint, fingerprint)

**ä¾èµ–å…³ç³»**: é›¶å·¥ä½œåŒºä¾èµ–,ä»…ä¾èµ– serde/serde_json/thiserror

**æ¶æ„è¯„ä»·**: â­â­â­â­â­ (5/5)
- æ¸…æ™°çš„é”™è¯¯è¯æ±‡è¡¨ç¡®ä¿è·¨ crate ä¸€è‡´æ€§
- æœºå™¨å¯è¯»çš„é”™è¯¯ç æ”¯æŒè‡ªåŠ¨åŒ–å¤„ç†
- å¯é€‰çš„ JSON æŒ‡é’ˆå­—æ®µæ”¯æŒç²¾ç¡®å®šä½é—®é¢˜
- ä½“ç° "boring clarity" è®¾è®¡å“²å­¦

**é—®é¢˜**: æ— 

**å»ºè®®**: è€ƒè™‘æ·»åŠ é”™è¯¯ç åˆ†ç±» (Error vs Warning vs Info)

---

### crates/sb-admin-contract

**æ–‡ä»¶è·¯å¾„**: `crates/sb-admin-contract/src/lib.rs` (89è¡Œ)
**æ¨¡å—ç›®æ ‡**: Admin API è¯·æ±‚/å“åº”ä¿¡å°å®šä¹‰

**æ ¸å¿ƒç»„ä»¶**:
- `ResponseEnvelope<T>`: æ³›å‹å“åº”ä¿¡å° (ok, data, error, request_id)
- `ErrorBody`: ç»“æ„åŒ–é”™è¯¯ä½“ (kind, msg, ptr, hint)
- `ErrorKind`: 9ç§é”™è¯¯ç±»å‹ + Other(String) å¯æ‰©å±•

**ä»£ç è´¨é‡**: â­â­â­â­â­ (9/10)
- ä¸¥æ ¼ lint: `deny(unwrap_used, expect_used, panic)`
- å…¨é¢æµ‹è¯•: å•å…ƒæµ‹è¯• + 267è¡Œé›†æˆæµ‹è¯•
- Builderæ¨¡å¼: `with_request_id()` é“¾å¼è°ƒç”¨
- å­—æ®µé¡ºåºå¥‘çº¦: æµ‹è¯•å¼ºåˆ¶ ok â†’ data â†’ error â†’ requestId é¡ºåº

**é—®é¢˜**:
- ç¼ºå°‘ API æ–‡æ¡£ (æ—  rustdoc æ³¨é‡Š)
- æ— åè®®ç‰ˆæœ¬å­—æ®µ (æœªæ¥æ¼”è¿›å›°éš¾)

**å»ºè®®**:
1. æ·»åŠ å®Œæ•´ rustdoc æ–‡æ¡£
2. æ·»åŠ  `version: u8` å­—æ®µç”¨äºåè®®æ¼”è¿›
3. æ·»åŠ  examples/ ç›®å½•

---

### crates/sb-security

**æ–‡ä»¶è·¯å¾„**: `crates/sb-security/src/` (3ä¸ªæ¨¡å—, 1300è¡Œ)
**æ¨¡å—ç›®æ ‡**: å®‰å…¨åŸè¯­ - æ•æ„Ÿæ•°æ®å¤„ç†

**æ ¸å¿ƒç»„ä»¶**:
- **redact.rs** (296è¡Œ): `RedactedString`, `redact_token/key/credential()`
- **key_loading.rs** (613è¡Œ): `KeySource`, `LoadedSecret`, `SecretLoader`, validators
- **lib.rs**: å…¬å…± API å¯¼å‡º

**å®‰å…¨å®è·µ**: â­â­â­â­â­ (9.5/10)
- **å†…å­˜å®‰å…¨**: `ZeroizeOnDrop` è‡ªåŠ¨æ“¦é™¤å¯†é’¥å†…å­˜
- **ä¿¡æ¯æ³„éœ²é˜²æŠ¤**: è‡ªå®šä¹‰ Debug/Display å¼ºåˆ¶å±è”½
- **æœ€å°æƒé™**: Unix æ–‡ä»¶æƒé™éªŒè¯ (æ‹’ç» 0o044 world/group-readable)
- **ç”Ÿäº§æ¨¡å¼é»˜è®¤**: `allow_insecure()` å¿…é¡»æ˜¾å¼å¯ç”¨

**ä»£ç è´¨é‡**:
- 19ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡ (100%)
- é›¶ clippy è­¦å‘Š
- ä¸“ä¸šçº§é”™è¯¯å¤„ç† (æ—  panic)

**é—®é¢˜**:
- `subtle` crate å·²å¯¼å…¥ä½†æœªä½¿ç”¨ (è®¡åˆ’å®ç°å¸¸é‡æ—¶é—´æ¯”è¾ƒ)
- ç¯å¢ƒå˜é‡ç¼“å­˜æœª zeroize
- Windows æ–‡ä»¶æƒé™éªŒè¯è·³è¿‡ (ä»…è­¦å‘Š)

**å»ºè®®**:
1. å®ç° `LoadedSecret::constant_time_eq()` ä½¿ç”¨ subtle
2. ç¼“å­˜ä½¿ç”¨ `Zeroizing<String>`
3. Windows ACL éªŒè¯ (windows-acl crate)

**ç»¼åˆè¯„ä»·**: ä¸“ä¸šçº§å®‰å…¨æ¨¡å—,å¯ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒ

---

### crates/sb-platform

**æ–‡ä»¶è·¯å¾„**: `crates/sb-platform/src/` (2755è¡Œ, 26æµ‹è¯•)
**æ¨¡å—ç›®æ ‡**: å¹³å°æŠ½è±¡å±‚ - TUNè®¾å¤‡ + è¿›ç¨‹åŒ¹é…

**æ¨¡å—ç»“æ„**:
- **tun/** (1576è¡Œ): TUNè®¾å¤‡ç®¡ç† (Linux/macOS/Windows)
- **process/** (777è¡Œ): è¿›ç¨‹â†’è¿æ¥æ˜ å°„ (Linux/macOS/Windows)

**Linux TUN** (366è¡Œ): â­â­â­â­â­ ç”Ÿäº§å°±ç»ª
- `/dev/net/tun` + ioctl(TUNSETIFF)
- å®‰å…¨: 3ä¸ª unsafe å—,å®Œæ•´ä¸­è‹±æ–‡æ³¨é‡Š
- é…ç½®: `ip` å‘½ä»¤è®¾ç½® MTU/åœ°å€/è·¯ç”±

**macOS TUN** (447è¡Œ): â­â­â­â­â­ ç”Ÿäº§å°±ç»ª
- `utun` æ§åˆ¶å¥—æ¥å­— + `CTLIOCGINFO`
- åè®®å¤´å¤„ç†: 4å­—èŠ‚ AF_INET/AF_INET6 å‰ç¼€
- å®‰å…¨: 7ä¸ª unsafe å—,å…¨éƒ¨æœ‰æ–‡æ¡£

**Windows TUN** (417è¡Œ): âš ï¸ å ä½ç¬¦å®ç°
- WinTun DLL æœªé›†æˆ (TODO æ ‡è®°)
- read() è¿”å›0, write() è™šå‡æˆåŠŸ
- netsh å‘½ä»¤å­˜åœ¨ä½†æœªè°ƒç”¨

**è¿›ç¨‹åŒ¹é…**:
- **Linux** (245è¡Œ): /proc/net/tcp è§£æ + inode æ‰«æ - âœ… é«˜æ•ˆ
- **macOS** (112è¡Œ): âš ï¸ lsof å‘½ä»¤è¡Œå·¥å…· (10-50ms å¼€é”€)
- **Windows** (155è¡Œ): âš ï¸ netstat + tasklist å‘½ä»¤è¡Œ

**çº¿ç¨‹å®‰å…¨**: âœ… å®Œç¾
- 30ç§’ TTL ç¼“å­˜ (RwLock + Instant)
- Localhost-only éªŒè¯
- å•è¿æ¥æ¨¡å‹ (æ— å…±äº«çŠ¶æ€)

**é—®é¢˜ (ä¼˜å…ˆçº§)**:
- **P0**: Windows WinTun éåŠŸèƒ½ (éœ€æ·»åŠ  wintun crate)
- **P1**: macOS/Windows ç”¨ CLI å·¥å…· (åº”ä½¿ç”¨åŸç”Ÿ API)
  - macOS: ç”¨ libproc æ›¿ä»£ lsof (å¿«10å€)
  - Windows: ç”¨ GetExtendedTcpTable æ›¿ä»£ netstat
- **P2**: æ— è‡ªåŠ¨ç¼“å­˜æ¸…ç† (éœ€åå° tokio ä»»åŠ¡)

**å»ºè®®**:
1. é›†æˆ wintun crate (4-8å°æ—¶)
2. macOS ç”¨ darwin-libproc FFI (8å°æ—¶)
3. Windows ç”¨ windows-rs API (8å°æ—¶)
4. æ·»åŠ  auto_route å®ç° (16å°æ—¶)

**ç»¼åˆè¯„ä»·**: Linux/macOS ç”Ÿäº§å°±ç»ª (8.5/10), Windows éœ€å®Œå–„ (3/10)

---

### crates/sb-runtime

**æ–‡ä»¶è·¯å¾„**: `crates/sb-runtime/src/` (1392è¡Œä»£ç , 444è¡Œæµ‹è¯•)
**æ¨¡å—ç›®æ ‡**: ç¦»çº¿æ¡æ‰‹æµ‹è¯•æ¡†æ¶ (Alpha ç‰¹æ€§)

**ç‰¹æ€§é—¨æ§**:
- `handshake_alpha`: æ ¸å¿ƒç¦»çº¿æµ‹è¯•
- `io_local_alpha`: Localhost TCP æµ‹è¯• (ä¾èµ– handshake_alpha)
- ç¦ç”¨æ—¶: ç¼–è¯‘é€šè¿‡ä½†æ— å…¬å…± API

**æ ¸å¿ƒæ¨¡å—**:
- **handshake.rs** (63è¡Œ): `Handshake` trait + ç¡®å®šæ€§ PRNG
- **loopback.rs** (389è¡Œ): å†…å­˜å›ç¯è¿æ¥ + JSONL æ—¥å¿—
- **jsonl.rs** (149è¡Œ): æµå¼ JSONL è§£æ + éªŒè¯
- **scenario.rs** (474è¡Œ): å£°æ˜å¼åœºæ™¯æµ‹è¯•æ¡†æ¶
- **tcp_local.rs** (194è¡Œ): Localhost TCP (127.0.0.1/::1 only)
- **protocols/** (72è¡Œ): Trojan/VMess ç¡®å®šæ€§ stub

**æ¶æ„äº®ç‚¹**:
- âœ… ç¡®å®šæ€§: xorshift64star PRNG, seed-based ç”Ÿæˆ
- âœ… å®‰å…¨çº¦æŸ: Localhost-only å¼ºåˆ¶éªŒè¯
- âœ… JSONL æ ¼å¼: è¡Œå¯¼å‘,ä¸ Unix å·¥å…·å…¼å®¹
- âœ… Chaos æ³¨å…¥: å»¶è¿Ÿ/ä¸¢åŒ…/trim/XOR æµ‹è¯•

**ä»£ç è´¨é‡**: â­â­â­â­ (8/10)
- 444è¡Œæµ‹è¯• (~32% è¦†ç›–ç‡)
- é›¶ clippy è­¦å‘Š
- å•çº¿ç¨‹ tokio è¿è¡Œæ—¶ (æµ‹è¯•è´Ÿè½½å……åˆ†)

**é—®é¢˜**:
- æ–‡æ¡£è¦†ç›–ç‡ä½ (~15%)
- Scenario include æ— æ·±åº¦é™åˆ¶ (æ ˆæº¢å‡ºé£é™©)
- Echo server æ— ä¼˜é›…å…³é—­
- Chaos å‚æ•°æ— éªŒè¯

**å»ºè®®**:
1. æ·»åŠ æ¨¡å—çº§ rustdoc (60%+ è¦†ç›–ç‡ç›®æ ‡)
2. include æ·±åº¦é™åˆ¶ (max_depth: 10)
3. spawn_echo_once è¿”å› JoinHandle
4. ChaosSpec::validate() æ–¹æ³•

**ç»¼åˆè¯„ä»·**: ç²¾å¿ƒè®¾è®¡çš„æµ‹è¯•å·¥å…·,é€‚åˆç¦»çº¿å›å½’æµ‹è¯•

---

## Layer 1: ä½çº§æœåŠ¡ Crates è¯¦ç»†åˆ†æ

### crates/sb-config

**æ–‡ä»¶è·¯å¾„**: `crates/sb-config/src/` (20ä¸ªæ–‡ä»¶, 2980è¡Œ)
**æ¨¡å—ç›®æ ‡**: é…ç½®ç®¡ç† - è§£æã€éªŒè¯ã€è§„èŒƒåŒ–ã€è¿ç§»

**æ ¸å¿ƒæ¨¡å—**:
- **lib.rs** (386è¡Œ): V1 Config ä¸»ç»“æ„
- **model.rs** (141è¡Œ): ListenAddr, User, InboundDef/OutboundDef
- **present.rs** (383è¡Œ): Config â†’ IR è½¬æ¢ + Go æ ¼å¼å…¼å®¹
- **ir/** (538è¡Œ): V2 IR å®šä¹‰ + é…ç½® diff ç”¨äºçƒ­é‡è½½
- **validator/v2.rs** (301è¡Œ): è‡ªå®šä¹‰ JSON Schema éªŒè¯å™¨
- **subscribe.rs** (332è¡Œ): Clash/Sing-Box è®¢é˜…è§£æ
- **merge/minimize/normalize**: é…ç½®ä¼˜åŒ–å·¥å…·

**é…ç½®æ¶æ„**: âš ï¸ ä¸‰ç³»ç»Ÿé‡å 
- `lib.rs::Config`: V1 æ‰å¹³ç»“æ„ (ç”¨æˆ·å¯è§)
- `model.rs::Config`: å¤‡é€‰ç»“æ„ (ç”¨é€”ä¸æ˜)
- `ir::ConfigIR`: V2 åµŒå¥—ç»“æ„ (11+ è·¯ç”±ç»´åº¦)

**V2 IR å¢å¼º**:
- 11ä¸ªæ­£å‘ç»´åº¦: domain, geosite, geoip, ipcidr, port, process, network, protocol, source, dest, user_agent
- 8ä¸ªåå‘ç»´åº¦: not_* (æ’é™¤è§„åˆ™)
- ç¯å¢ƒå˜é‡å‡­æ®æ”¯æŒ
- Selector outbound (è´Ÿè½½å‡è¡¡)

**éªŒè¯ç®¡é“**: 3å±‚
1. Serde ç±»å‹å®‰å…¨
2. è¯­ä¹‰éªŒè¯ (`validate()`: å”¯ä¸€æ€§ã€å¼•ç”¨å®Œæ•´æ€§)
3. Schema éªŒè¯ (è‡ªå®šä¹‰å®ç°,ä»…éªŒè¯ root + inbounds)

**é—®é¢˜ (å…³é”®)**:
- âŒ **P0**: 2ä¸ªé›†æˆæµ‹è¯•å¤±è´¥
  - `test_v1_variants_pass_migration`: schema_version æœªæ›´æ–° (compat.rs:21)
  - `test_unknown_fields_generate_warnings`: æœªç”Ÿæˆè­¦å‘Š (validator/v2.rs)
- âŒ **P0**: ç”Ÿäº§ panic é£é™© (schema_v2.rs:6 ä½¿ç”¨ expect)
- âš ï¸ **P1**: ä¸‰é…ç½®ç³»ç»Ÿæ··ä¹± (lib vs model vs ir)
- âš ï¸ **P1**: 180è¡Œæ³¨é‡Šæ­»ä»£ç  (lib.rs:173-258)
- âš ï¸ **P1**: æ‰‹åŠ¨ schema éªŒè¯ (åº”ç”¨ jsonschema crate)

**å¤šæ ¼å¼æ”¯æŒ**:
- âœ… YAML/JSON åŸç”Ÿæ ¼å¼
- âœ… Clash è®¢é˜…è§£æ (proxies + rules)
- âœ… Sing-Box è®¢é˜…è§£æ (outbounds + route.rules)

**ä»£ç è´¨é‡**: â­â­â­ (6.5/10)
- 15ä¸ªå•å…ƒæµ‹è¯•é€šè¿‡
- 2/4 é›†æˆæµ‹è¯•å¤±è´¥ âŒ
- é›¶ clippy è­¦å‘Š âœ…
- æ–‡æ¡£è¦†ç›–ç‡ä½ (~15%)

**ä¿®å¤è·¯å¾„**:
```rust
// 1. compat.rs:21 - å¼ºåˆ¶è¦†ç›–
obj.insert("schema_version".to_string(), Value::from(2));

// 2. schema_v2.rs:6 - ç§»é™¤ expect
pub fn schema_v2() -> Result<Value> {
    serde_json::from_str(include_str!("..."))
        .context("Failed to parse v2_schema.json")
}

// 3. validator/v2.rs - æ·»åŠ  allow_unknown å‚æ•°
pub fn validate_v2(doc: &Value, allow_unknown: bool) -> Vec<Value>
```

**å»ºè®®** (ä¼˜å…ˆçº§):
1. **P0**: ä¿®å¤ 3ä¸ªå…³é”® bug (2å°æ—¶)
2. **P1**: åˆ é™¤æ³¨é‡Šæ­»ä»£ç  (30åˆ†é’Ÿ)
3. **P1**: æ•´åˆé…ç½®ç³»ç»Ÿ (8å°æ—¶)
4. **P1**: ç”¨ jsonschema crate æ›¿æ¢æ‰‹åŠ¨éªŒè¯ (4å°æ—¶)
5. **P2**: æ–‡æ¡£è¦†ç›–ç‡æå‡åˆ° 60% (16å°æ—¶)

**ç»¼åˆè¯„ä»·**: åŠŸèƒ½å®Œæ•´ä½†éœ€ä¿®å¤å…³é”® bug,é‡æ„é…ç½®ç³»ç»Ÿ

---

### crates/sb-metrics

**æ–‡ä»¶è·¯å¾„**: `crates/sb-metrics/src/` (5ä¸ªæ¨¡å—, 1085è¡Œ)
**æ¨¡å—ç›®æ ‡**: Prometheus æŒ‡æ ‡å¯¼å‡º

**æ ¸å¿ƒæ¨¡å—**:
- **lib.rs** (662è¡Œ): ä¸»æ³¨å†Œè¡¨ + 40+ æŒ‡æ ‡
- **http.rs** (241è¡Œ): HTTP å…¥ç«™/ä»£ç†æŒ‡æ ‡
- **socks.rs** (69è¡Œ): SOCKS UDP æŒ‡æ ‡
- **transfer.rs** (103è¡Œ): ä¼ è¾“/å¸¦å®½æŒ‡æ ‡
- **server.rs** (10è¡Œ): å ä½ç¬¦

**æŒ‡æ ‡ç±»å‹** (40+ æ€»æ•°):
- IntCounter: 13
- IntCounterVec: 13 (å¸¦æ ‡ç­¾)
- IntGauge: 5
- GaugeVec: 2
- Histogram: 3 (å»¶è¿Ÿåˆ†å¸ƒ)
- HistogramVec: 3

**å…³é”®æŒ‡æ ‡**:
```
router_rule_match_total{category, outbound}
outbound_connect_attempt_total{kind}
outbound_connect_error_total{kind, class}
http_method_total{method}
http_status_class_total{class}  // 2xx/3xx/4xx/5xx èšåˆ
adapter_dial_latency_ms{adapter}
bytes_total{dir, chan}
```

**çº¿ç¨‹å®‰å…¨**: â­â­â­â­â­ å®Œç¾
- LazyLock é™æ€åˆå§‹åŒ–
- Atomic æ“ä½œ (Ordering::Relaxed)
- éé˜»å¡ mutex (try_lock)
- Prometheus æŒ‡æ ‡ Send + Sync

**æ€§èƒ½**:
- åˆå§‹åŒ–: ~50Î¼s (é¦–æ¬¡è®¿é—®)
- Counter increment: ~10-20ns
- Labeled counter: ~50-100ns
- Histogram observation: ~100-200ns

**é—®é¢˜ (å…³é”®)**:
- âŒ **P0**: æµ‹è¯•æŸå - å¼•ç”¨å·²åˆ é™¤ `registry` æ¨¡å—
- âš ï¸ **P1**: é”™è¯¯å¤„ç†ä¸ä¸€è‡´ (expect vs unwrap vs .ok() æ··åˆ)
- âš ï¸ **P1**: æ¨¡å—é‡å  (socks.rs vs lib.rs::socks_in)
- âš ï¸ **P1**: ä¸¤ä¸ª HTTP exporter å®ç° (lib.rs + sb-core)
- âš ï¸ **P2**: æ— ç•Œæ ‡ç­¾åŸºæ•°é£é™© (outbound/proxy åç§°)

**å‘½åä¸ä¸€è‡´**:
- æ··åˆæ—¶é—´å•ä½ (seconds vs ms)
- ä¸ä¸€è‡´ç»„ä»¶å‰ç¼€
- é—ç•™æŒ‡æ ‡ç¼ºå‘½åç©ºé—´

**é€Ÿç‡é™åˆ¶å™¨**: â­â­â­â­â­ ä¼˜ç§€è®¾è®¡
```rust
// æ¯30ç§’æœ€å¤šè®°å½•1æ¬¡é”™è¯¯
static LAST_ERR: LazyLock<Mutex<Instant>> = ...;
if let Ok(mut last) = LAST_ERR.try_lock() {
    if last.elapsed() > Duration::from_secs(30) {
        tracing::warn!("metrics export failed: {}", e);
        *last = Instant::now();
    }
}
```

**ä¿®å¤è·¯å¾„**:
```rust
// 1. lib.rs - æ·»åŠ ç¼ºå¤±å‡½æ•°
pub fn export_prometheus() -> String {
    let families = REGISTRY.gather();
    let mut buf = Vec::new();
    prometheus::TextEncoder::new().encode(&families, &mut buf).unwrap();
    String::from_utf8(buf).unwrap()
}

// 2. ç»Ÿä¸€é”™è¯¯å¤„ç†
.map_err(|e| tracing::warn!("metric registration failed: {}", e))

// 3. æ ‡ç­¾åŸºæ•°é™åˆ¶
const MAX_PROXIES: usize = 1000;
```

**å»ºè®®** (ä¼˜å…ˆçº§):
1. **P0**: ä¿®å¤æµ‹è¯• (æ·»åŠ  export_prometheus, 30åˆ†é’Ÿ)
2. **P1**: è§£å†³æ¨¡å—é‡å  (åˆå¹¶æˆ–é‡å‘½å, 2å°æ—¶)
3. **P1**: ç»Ÿä¸€é”™è¯¯å¤„ç† (4å°æ—¶)
4. **P2**: æ·»åŠ æ ‡ç­¾åŸºæ•°é™åˆ¶ (2å°æ—¶)
5. **P2**: å‘½åä¸€è‡´æ€§é‡æ„ (8å°æ—¶)
6. **P3**: æ·»åŠ å•å…ƒæµ‹è¯• (16å°æ—¶)

**ç»¼åˆè¯„ä»·**: â­â­â­ (7/10) - è‰¯å¥½è®¾è®¡ä½†éœ€ä¿®å¤æµ‹è¯•å’Œä¸€è‡´æ€§

---

## æ¶æ„æ¨¡å¼æ€»ç»“

### 1. ä¾èµ–æ³¨å…¥ä¸åˆ†å±‚
- âœ… æ¸…æ™°çš„åˆ†å±‚æ¶æ„ (Layer 0-4)
- âœ… å•å‘ä¾èµ–æµ (æ— å¾ªç¯,å·²æ‰“ç ´ sb-core â† sb-config)
- âœ… Trait-based æŠ½è±¡ (TunDevice, Handshake, UpstreamConnector)

### 2. é”™è¯¯å¤„ç†ç»Ÿä¸€
- âœ… sb-types::IssueCode ä½œä¸ºå…¨å±€é”™è¯¯è¯æ±‡è¡¨
- âœ… anyhow ç”¨äºåº”ç”¨é”™è¯¯ä¼ æ’­
- âœ… thiserror ç”¨äºåº“é”™è¯¯å®šä¹‰
- âš ï¸ éƒ¨åˆ† crate ä»æœ‰ expect/unwrap (éœ€ä¿®å¤)

### 3. ç‰¹æ€§é—¨æ§ç­–ç•¥
- âœ… å¹¿æ³›ä½¿ç”¨ features å‡å°‘ç¼–è¯‘æ—¶é—´
- âœ… åˆ†å±‚ç‰¹æ€§ä¾èµ– (io_local_alpha â†’ handshake_alpha)
- âœ… å¯é€‰ä¾èµ–é€šè¿‡ features æ¿€æ´»
- ğŸ“Š æ€»è®¡ 100+ features è·¨æ‰€æœ‰ crates

### 4. æµ‹è¯•ç­–ç•¥
- âœ… å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•åŒå±‚è¦†ç›–
- âœ… ç‰¹æƒæµ‹è¯•ç”¨ `#[cfg(feature = "integration_tests")]`
- âœ… Golden tests ç”¨äºç¡®å®šæ€§éªŒè¯
- âš ï¸ éƒ¨åˆ† crate æµ‹è¯•è¦†ç›–ç‡åä½ (<50%)

### 5. å®‰å…¨å®è·µ
- â­ ä¸“ä¸šçº§: Zeroize, å‡­æ®å±è”½, æ–‡ä»¶æƒé™éªŒè¯
- â­ å…¨é¢çš„ unsafe æ–‡æ¡£ (ä¸­è‹±åŒè¯­)
- â­ ä¸¥æ ¼ lint: deny(unwrap_used, expect_used, panic)
- âœ… Localhost-only çº¦æŸ (æµ‹è¯•ç‰¹æ€§)

### 6. å¹¶å‘æ¨¡å‹
- âœ… Tokio ä½œä¸ºç»Ÿä¸€å¼‚æ­¥è¿è¡Œæ—¶
- âœ… LazyLock ç”¨äºçº¿ç¨‹å®‰å…¨å•ä¾‹
- âœ… Atomic æ“ä½œç”¨äºæŒ‡æ ‡è®¡æ•°
- âœ… RwLock ç”¨äºç¼“å­˜è®¿é—®

---

## å…³é”®ä¿®å¤ä¼˜å…ˆçº§çŸ©é˜µ

| ä¼˜å…ˆçº§ | Crate | é—®é¢˜ | å·¥ä½œé‡ | é£é™© |
|--------|-------|------|--------|------|
| **P0** | sb-config | schema_version è¿ç§» bug | 30åˆ†é’Ÿ | é«˜ |
| **P0** | sb-config | schema_v2 panic é£é™© | 15åˆ†é’Ÿ | é«˜ |
| **P0** | sb-config | è­¦å‘Šæœªç”Ÿæˆ | 1å°æ—¶ | ä¸­ |
| **P0** | sb-metrics | æµ‹è¯•æŸå | 30åˆ†é’Ÿ | ä½ |
| **P0** | sb-platform | Windows WinTun | 4-8å°æ—¶ | ä¸­ |
| **P1** | sb-config | ä¸‰é…ç½®ç³»ç»Ÿé‡å  | 8å°æ—¶ | ä¸­ |
| **P1** | sb-config | 180è¡Œæ³¨é‡Šä»£ç  | 30åˆ†é’Ÿ | ä½ |
| **P1** | sb-metrics | æ¨¡å—é‡å  | 2å°æ—¶ | ä½ |
| **P1** | sb-metrics | é”™è¯¯å¤„ç†ä¸ä¸€è‡´ | 4å°æ—¶ | ä½ |
| **P1** | sb-platform | macOS/Windows CLIå·¥å…· | 16å°æ—¶ | ä¸­ |
| **P2** | sb-config | æ‰‹åŠ¨ schema éªŒè¯ | 4å°æ—¶ | ä½ |
| **P2** | sb-metrics | æ ‡ç­¾åŸºæ•°é£é™© | 2å°æ—¶ | ä¸­ |
| **P2** | sb-security | subtle æœªä½¿ç”¨ | 2å°æ—¶ | ä½ |
| **P2** | sb-runtime | æ–‡æ¡£è¦†ç›–ç‡ | 16å°æ—¶ | ä½ |

**æ€»å·¥ä½œé‡ä¼°ç®—**: P0 ~15å°æ—¶, P1 ~30å°æ—¶, P2 ~24å°æ—¶

---

## å¾…åˆ†æ Crates (Layer 2-3)

ç”±äº token é™åˆ¶å’Œæ—¶é—´è€ƒè™‘,ä»¥ä¸‹ crates çš„è¯¦ç»†åˆ†æå°†åœ¨åç»­æ›´æ–°ä¸­å®Œæˆ:

### Layer 2: æ ¸å¿ƒåŸºç¡€è®¾æ–½
- **crates/sb-transport**: ä¼ è¾“å±‚æŠ½è±¡ (TCP, TLS, QUIC, è¿æ¥æ± , æ–­è·¯å™¨)
- **crates/sb-core**: æœ€å¤§ crate,60+ features (è·¯ç”±ã€DNSã€åè®®ã€å¥åº·æ£€æŸ¥)
- **crates/sb-proto**: åè®®å®ç° (Trojan, SS2022, å·¥å‚æ¨¡å¼)

### Layer 3: é«˜çº§æœåŠ¡
- **crates/sb-subscribe**: è®¢é˜…ç®¡ç† (fetching, parsing, diffing, linting)
- **crates/sb-api**: API æœåŠ¡ (Clash API, V2Ray API)
- **crates/sb-adapters**: ä»£ç†é€‚é…å™¨ (HTTP, SOCKS, TUN, VMess, TUIC)

**åˆæ­¥è¯„ä¼°** (åŸºäº Cargo.toml å’Œæ–‡ä»¶ç»“æ„):
- sb-core: å¤æ‚åº¦æœ€é«˜,60+ features,éœ€é‡ç‚¹åˆ†æè·¯ç”±å¼•æ“å’Œ DNS å®ç°
- sb-transport: æ–­è·¯å™¨å’Œèµ„æºå‹åŠ›ç®¡ç†æ˜¯äº®ç‚¹
- sb-proto: å·¥å‚æ¨¡å¼ + trait-based è®¾è®¡,æ¶æ„ä¼˜ç§€
- sb-subscribe: å¤šæ ¼å¼æ”¯æŒ (Clash, Sing-Box, hash, lint)
- sb-api: åŒ API ç³»ç»Ÿ (Clash + V2Ray gRPC)
- sb-adapters: æœ€å¤šåè®®æ”¯æŒ,å¹³å°ç‰¹å®šä»£ç å¤š

---

## æ€»ä½“å»ºè®®ä¸è·¯çº¿å›¾

### çŸ­æœŸ (1-2å‘¨)
1. âœ… ä¿®å¤æ‰€æœ‰ P0 é—®é¢˜ (15å°æ—¶)
   - sb-config 3ä¸ª bug
   - sb-metrics æµ‹è¯•ä¿®å¤
   - è¯„ä¼° Windows WinTun å·¥ä½œé‡
2. âœ… åˆ é™¤æ³¨é‡Šæ­»ä»£ç  (30åˆ†é’Ÿ)
3. âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†æ¨¡å¼ (4å°æ—¶)
4. âœ… æ·»åŠ ç¼ºå¤±æ–‡æ¡£ (æ ¸å¿ƒ API, 8å°æ—¶)

### ä¸­æœŸ (1-2æœˆ)
1. âœ… é‡æ„ sb-config é…ç½®ç³»ç»Ÿ (8å°æ—¶)
2. âœ… å®Œæˆ Windows å¹³å°æ”¯æŒ (24å°æ—¶)
   - WinTun é›†æˆ
   - åŸç”Ÿè¿›ç¨‹åŒ¹é… API
3. âœ… æ·±åº¦åˆ†æ Layer 2-3 crates (40å°æ—¶)
4. âœ… æ€§èƒ½åŸºå‡†æµ‹è¯• (16å°æ—¶)
5. âœ… å®‰å…¨å®¡è®¡ (subtle å®ç°, ACL éªŒè¯, 16å°æ—¶)

### é•¿æœŸ (3-6æœˆ)
1. âœ… æ–‡æ¡£å®Œæ•´æ€§ (80%+ rustdoc è¦†ç›–ç‡)
2. âœ… æµ‹è¯•è¦†ç›–ç‡æå‡ (80%+ line coverage)
3. âœ… æ¶æ„æ–‡æ¡£æ›´æ–° (ARCHITECTURE.md)
4. âœ… CI/CD å¢å¼º (è·¨å¹³å°æµ‹è¯•, benchmark guard)
5. âœ… æ€§èƒ½ä¼˜åŒ– (åŸºäº profiling ç»“æœ)

---

## ç»“è®º

singbox-rust é¡¹ç›®å±•ç°å‡ºäº†**ä¸“ä¸šçº§çš„æ¶æ„è®¾è®¡å’Œå·¥ç¨‹å®è·µ**:

### ä¼˜åŠ¿
- â­ æ¸…æ™°çš„åˆ†å±‚æ¶æ„,ä¾èµ–æ–¹å‘æ­£ç¡®
- â­ ä¸“ä¸šçº§å®‰å…¨å®è·µ (zeroize, å±è”½, æƒé™éªŒè¯)
- â­ ä¸¥æ ¼çš„ä»£ç è´¨é‡é—¨æ§› (clippy strict, deny unwrap)
- â­ è‰¯å¥½çš„æµ‹è¯•æ–‡åŒ– (å•å…ƒ + é›†æˆ + golden tests)
- â­ è·¨å¹³å°æ”¯æŒæ„è¯† (Linux/macOS å·²å°±ç»ª)

### éœ€æ”¹è¿›
- éƒ¨åˆ†æµ‹è¯•å¤±è´¥éœ€ç«‹å³ä¿®å¤ (P0)
- é…ç½®ç³»ç»Ÿéœ€é‡æ„ç®€åŒ– (P1)
- Windows å¹³å°éœ€å®Œå–„å®ç° (P0-P1)
- æ–‡æ¡£è¦†ç›–ç‡éœ€æå‡ (P2)
- éƒ¨åˆ†æ¨¡å—å­˜åœ¨è®¾è®¡å€º (P2)

### ç”Ÿäº§å°±ç»ªåº¦
- **Linux**: â­â­â­â­â­ (9/10) - ç”Ÿäº§å°±ç»ª
- **macOS**: â­â­â­â­ (8.5/10) - ç”Ÿäº§å°±ç»ª,å»ºè®®ä¼˜åŒ–è¿›ç¨‹åŒ¹é…
- **Windows**: â­â­â­ (6/10) - éœ€å®Œå–„ WinTun å’ŒåŸç”Ÿ API

**æ€»ä½“è¯„ä»·**: â­â­â­â­ (8/10) - ä¼˜ç§€çš„ Rust é¡¹ç›®,å€¼å¾—ç»§ç»­æŠ•å…¥