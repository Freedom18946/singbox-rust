# SingBox-Rust æµ‹è¯•æŒ‡å—

æœ¬ç›®å½•åŒ…å« singbox-rust é¡¹ç›®çš„æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ï¼ŒæŒ‰åŠŸèƒ½å’Œç±»å‹è¿›è¡Œäº†é‡æ–°ç»„ç»‡ã€‚

## ç›®å½•ç»“æ„

```
tests/
â”œâ”€â”€ integration/     # é›†æˆæµ‹è¯• - è·¨æ¨¡å—åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ unit/           # å•å…ƒæµ‹è¯• - å•ä¸ªæ¨¡å—æµ‹è¯•
â”œâ”€â”€ configs/        # æµ‹è¯•é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/           # æµ‹è¯•æ•°æ®æ–‡ä»¶
â”œâ”€â”€ scripts/        # æµ‹è¯•è„šæœ¬
â””â”€â”€ docs/           # æµ‹è¯•ç›¸å…³æ–‡æ¡£
```

## æµ‹è¯•åˆ†ç±»

### ğŸ”— é›†æˆæµ‹è¯• (integration/)
- `test_schema_v2_integration.rs` - Schema V2 é”™è¯¯æ ¼å¼é›†æˆæµ‹è¯•
- `test_udp_nat_*` - UDP NAT ç³»ç»Ÿå®Œæ•´åŠŸèƒ½æµ‹è¯•
- `verify_*` - å„ç§åŠŸèƒ½éªŒè¯è„šæœ¬

### ğŸ§ª å•å…ƒæµ‹è¯• (unit/)
- å¾…æ·»åŠ ï¼šå„æ¨¡å—çš„å•å…ƒæµ‹è¯•

### âš™ï¸ é…ç½®æµ‹è¯• (configs/)
- `test_*_config.yaml` - å„ç§é…ç½®åœºæ™¯æµ‹è¯•
- `test_schema_v2_*.yaml` - Schema V2 éªŒè¯æµ‹è¯•
- `test_cert.pem` - æµ‹è¯•è¯ä¹¦æ–‡ä»¶

### ğŸ“Š æµ‹è¯•æ•°æ® (data/)
- `demo*.json` - æ¼”ç¤ºæ•°æ®
- `task_receipt*.json` - ä»»åŠ¡æ‰§è¡Œå›æ‰§
- `*.long-type-*.txt` - ç¼–è¯‘å™¨ç±»å‹æ¨æ–­ä¸´æ—¶æ–‡ä»¶

### ğŸ› ï¸ æµ‹è¯•è„šæœ¬ (scripts/)
- `verify_schema_v2_implementation.sh` - Schema V2 å®ç°éªŒè¯

### ğŸ“š æµ‹è¯•æ–‡æ¡£ (docs/)
- `UDP_NAT_*.md` - UDP NAT ç³»ç»Ÿå®ç°æ–‡æ¡£
- `SCHEMA_V2_*.md` - Schema V2 é”™è¯¯æ ¼å¼æ–‡æ¡£

## è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
cargo test
```

### è¿è¡Œé›†æˆæµ‹è¯•
```bash
cargo test --test integration
```

### è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
# UDP NAT æµ‹è¯•
./tests/integration/test_udp_nat_complete_system

# Schema V2 æµ‹è¯•
cargo test --test test_schema_v2_integration
```

### è¿è¡ŒéªŒè¯è„šæœ¬
```bash
# Schema V2 éªŒè¯
./tests/scripts/verify_schema_v2_implementation.sh
```

## æµ‹è¯•å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„é›†æˆæµ‹è¯•
1. åœ¨ `integration/` ç›®å½•åˆ›å»ºæµ‹è¯•æ–‡ä»¶
2. ä½¿ç”¨æè¿°æ€§çš„æ–‡ä»¶åï¼Œå¦‚ `test_feature_name.rs`
3. åŒ…å«å®Œæ•´çš„åŠŸèƒ½éªŒè¯

### æ·»åŠ é…ç½®æµ‹è¯•
1. åœ¨ `configs/` ç›®å½•æ·»åŠ æµ‹è¯•é…ç½®
2. ä½¿ç”¨ `test_` å‰ç¼€å‘½å
3. åŒ…å«æ­£é¢å’Œè´Ÿé¢æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•æ•°æ®ç®¡ç†
1. å°†æµ‹è¯•æ•°æ®æ”¾åœ¨ `data/` ç›®å½•
2. ä½¿ç”¨æœ‰æ„ä¹‰çš„æ–‡ä»¶å
3. å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶

## æœ€è¿‘æ›´æ–°

- âœ… é‡æ–°ç»„ç»‡æµ‹è¯•ç›®å½•ç»“æ„
- âœ… å®Œæˆ UDP NAT ç³»ç»Ÿé›†æˆæµ‹è¯•
- âœ… æ·»åŠ  Schema V2 é”™è¯¯æ ¼å¼æµ‹è¯•
- âœ… æ•´ç†æµ‹è¯•é…ç½®å’Œæ•°æ®æ–‡ä»¶